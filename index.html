<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>彩色©相拥与你</title>
    <!-- 引入Font Awesome图标库 -->
    <link id="v28" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Times New Roman', serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        
        .newspaper {
            width: 800px;
            padding: 30px;
            background-color: white;
            box-shadow: 0 0 25px rgba(0, 0, 255, 0.3), 
                        0 0 50px rgba(0, 255, 255, 0.2),
                        0 0 75px rgba(255, 0, 255, 0.1);
            border: 3px solid gold;
            border-radius: 10px;
            position: relative;
        }
        
        .title {
            font-size: 2.5em;
            margin: 0 0 20px 0;
            text-align: center;
            font-weight: bold;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow 5s ease infinite;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .image-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .image-container img {
            max-width: 100%;
            height: auto;
            border: 2px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .divider {
            border-top: 3px dashed #ccc;
            margin: 20px 0;
        }
        
        .content-text {
            margin: 20px 0;
            line-height: 1.6;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow 5s ease infinite;
            font-size: 1.2em;
        }
        
        .video-container {
            margin: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        video {
            max-width: 100%;
            border: 2px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            /* 禁用视频交互 */
            pointer-events: none;
        }
        
        /* 覆盖层，防止交互 */
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.8em;
            opacity: 0.7;
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: rainbow 5s ease infinite;
        }
        
        /* 作者链接小球 */
        .author-bubble {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .author-bubble:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        .author-bubble a {
            text-decoration: none;
            color: #333;
            font-weight: bold;
            font-size: 16px;
        }
        
        /* 音乐控制球 */
        .music-ball {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 192, 203, 0.8); /* 樱花粉 */
            border: 3px solid gold;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            animation: rotate 8s linear infinite;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
            transition: all 0.3s ease;
        }
        
        .music-ball:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.8);
        }
        
        .music-ball::before {
            content: "♪";
            font-size: 28px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .music-ball.playing {
            animation-duration: 4s;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }
        
        /* 下一曲按钮 */
        .next-button {
            position: fixed;
            top: 90px;
            right: 20px;
            width: 60px;
            height: 30px;
            background-color: rgba(255, 192, 203, 0.8);
            border: 2px solid gold;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            font-size: 12px;
            color: #fff;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .next-button:hover {
            background-color: rgba(255, 105, 180, 0.9);
            transform: translateY(-2px);
        }
        
        /* API模式下的音乐控制球样式 */
        .music-ball.api-mode::before {
            content: "\f001"; /* Font Awesome音乐图标 */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 24px;
        }
        
        /* API模式搜索面板 */
        .search-panel {
            position: fixed;
            top: 150px;
            right: 30px;
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 15px;
            z-index: 999;
            display: none;
        }
        
        .search-input {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ff69b4;
            border-radius: 20px;
            margin-bottom: 10px;
            font-size: 14px;
            outline: none;
        }
        
        .search-button {
            width: 100%;
            padding: 8px;
            background: linear-gradient(90deg, #ff69b4, #ff1493);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .search-results {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 5px;
        }
        
        .search-result-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        
        .search-result-item:hover {
            background-color: #f9f9f9;
        }
        
        .result-cover {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            margin-right: 10px;
            object-fit: cover;
        }
        
        .result-info {
            flex: 1;
        }
        
        .result-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .result-artist {
            font-size: 12px;
            color: #666;
        }
        
        /* 留言系统按钮 */
        .contact-button {
            position: fixed;
            bottom: 25px;
            left: 90px;
            background: linear-gradient(to right, #2575fc, #6a11cb);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .contact-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* 留言系统容器 */
        .contact-container {
            position: fixed;
            bottom: -400px;
            left: 0;
            right: 0;
            background: white;
            z-index: 900;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            transition: bottom 0.5s ease;
            overflow-y: auto;
            max-height: 400px;
        }
        
        .contact-container.active {
            bottom: 0;
        }
        
        /* 密码输入弹窗 */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
        }
        
        .password-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .password-input {
            width: 100%;
            padding: 12px 15px;
            margin: 15px 0;
            border: 2px solid #6a11cb;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
        }
        
        .password-input::placeholder {
            opacity: 0.6;
        }
        
        .password-button {
            background: linear-gradient(to right, #2575fc, #6a11cb);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .password-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* 多API搜索面板 */
        .multi-api-panel {
            display: none;
            position: fixed;
            top: 150px;
            right: 30px;
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 15px;
            z-index: 999;
        }
        
        .api-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .api-tab {
            padding: 8px 15px;
            background: #f0f0f0;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .api-tab.active {
            background: linear-gradient(90deg, #ff69b4, #ff1493);
            color: white;
        }
        
        .more-api-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(90deg, #2575fc, #6a11cb);
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* 移动设备优化 */
        @media (max-width: 768px) {
            .newspaper {
                width: 95%;
                padding: 15px;
            }
            
            .title {
                font-size: 1.8em;
            }
            
            .content-text {
                font-size: 1em;
            }
            
            .author-bubble {
                bottom: 15px;
                left: 15px;
                width: 50px;
                height: 50px;
            }
            
            .author-bubble a {
                font-size: 14px;
            }
            
            .music-ball {
                top: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
            }
            
            .music-ball::before {
                font-size: 22px;
            }
            
            .next-button {
                top: 75px;
                right: 15px;
                width: 50px;
                height: 25px;
                font-size: 11px;
            }
            
            .search-panel, .multi-api-panel {
                top: 120px;
                right: 15px;
                width: 250px;
            }
            
            .contact-button {
                left: 75px;
                padding: 7px 14px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="newspaper">
        <h1 class="title">随便做的☻☻☻</h1>
        
        <div class="image-container">
            <img src="a1.jpg" alt="本地图片">
        </div>
        
        <!-- 第一段文字开始 -->
        <div class="content-text">
            8月22日：为什么第1首和最后一首是一样的→第1首和第2首都是无损音质，最后一首是第1首的流畅版，我要测试无损音质和流畅音质Url的有效时长，所以第1首和第3首是一样的，还有就是为什么不用本地文件，因为服务器在国外传输效率太慢，所以才用国内的url代替。
            这里是您要写的第一段文字内容。这段文字将会显示彩色变幻效果。您可以在这里添加任何您想表达的内容，新闻、故事或者任何信息。
        </div>
        <!-- 第一段文字结束 -->
        
        <div class="divider"></div>
        <div class="divider"></div>
        <div class="divider"></div>
        <div class="divider"></div>
        
        <div class="image-container">
            <img src="https://b0.bdstatic.com/ugc/bgkvKRvokca0tJRRXPYzMA3f7365a00fb6282bd1a222dbf237f41c.gif" alt="网络图片">
        </div>
        
        <!-- 第二段文字开始 -->
        <div class="content-text">
        8月23日：由于这些url的有效时长都太短了， 所以作者冒着被追杀的风险找到了几个api接口，现在可以可以非常可以了
          作者复活着就是😨          这里是您要写的第二段文字内容。这段文字同样会显示彩色变幻效果。您可以继续在这里添加更多内容，丰富您的报纸版面。
        </div>
        <!-- 第二段文字结束 -->
        
        <!-- 第三段文字开始 -->
        <div class="content-text">
            这里是您要写的第三段文字内容。报纸的最后部分，可以用于总结或者预告下期内容。
        </div>
        <!-- 第三段文字结束 -->
        
        <div class="video-container">
            <!-- 视频元素 -->
            <video id="myVideo" muted autoplay playsinline loop>
                <source src="https://vd4.bdstatic.com/mda-rhme65ipf0qijnp1/576p/h264/1755856841388462094/mda-rhme65ipf0qijnp1.mp4?v_from_s=bdapp-resbox-nanjing" type="video/mp4">
                您的浏览器不支持视频播放。
            </video>
            <!-- 覆盖层防止交互 -->
            <div class="video-overlay"></div>
        </div>
        
        <div class="watermark">©2025zhuchuangzuo</div>
    </div>
    
    <!-- 作者链接小球 -->
    <div class="author-bubble">
        <a href="https://qm.qq.com/q/pey4opIljy" target="_blank">😘作者</a>
    </div>
    
    <!-- 音乐控制球 -->
    <div class="music-ball" id="musicBall"></div>
    
    <!-- 下一曲按钮 -->
    <div class="next-button" id="nextButton">下一曲</div>
    
    <!-- 留言系统按钮 -->
    <div class="contact-button" id="contactButton">
        <i class="fas fa-envelope"></i> 联系我们
    </div>
    
    <!-- API模式搜索面板 -->
    <div class="search-panel" id="searchPanel">
        <input type="text" class="search-input" id="musicSearchInput" placeholder="搜索音乐呢😋...">
        <button class="search-button" id="searchButton">炸飞你🙄</button>
        <div class="search-results" id="searchResults"></div>
    </div>
    
    <!-- 多API搜索面板 -->
    <div class="multi-api-panel" id="multiApiPanel">
        <div class="api-tabs">
            <div class="api-tab active" data-api="netease">网易云</div>
            <div class="api-tab" data-api="tencent">QQ音乐</div>
            <div class="api-tab" data-api="kugou">酷狗</div>
        </div>
        <input type="text" class="search-input" id="multiMusicSearchInput" placeholder="搜索音乐呢😋...">
        <button class="search-button" id="multiSearchButton">炸飞你🙄</button>
        <div class="search-results" id="multiSearchResults"></div>
    </div>
    
    <!-- 留言系统容器 -->
    <div class="contact-container" id="contactContainer">
        <!-- 留言系统内容 -->
        <div style="max-width: 1000px; margin: 0 auto; padding: 20px;">
            <div style="background: linear-gradient(to right, #2575fc, #6a11cb); color: white; padding: 20px; text-align: center;">
                <h1 style="font-size: 1.8rem; margin-bottom: 8px;">联系我们</h1>
                <p style="font-size: 1rem; opacity: 0.9;">如果您有任何问题或建议，请通过QQ邮箱与我们联系</p>
            </div>
            
            <div style="padding: 20px; display: grid; grid-template-columns: 1fr; gap: 20px;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);">
                    <h2 style="color: #2575fc; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #eaeaea; font-size: 1.4rem;">联系方式</h2>
                    
                    <div style="display: flex; align-items: center; margin-bottom: 15px; padding: 12px; background: white; border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); transition: transform 0.3s;">
                        <div style="font-size: 20px; color: #2575fc; margin-right: 12px; width: 40px; height: 40px; background: rgba(37, 117, 252, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3>QQ邮箱</h3>
                            <p>通过QQ邮箱直接发送邮件给我们</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; margin-bottom: 15px; padding: 12px; background: white; border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); transition: transform 0.3s;">
                        <div style="font-size: 20px; color: #2575fc; margin-right: 12px; width: 40px; height: 40px; background: rgba(37, 117, 252, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-comment-alt"></i>
                        </div>
                        <div>
                            <h3>快速留言</h3>
                            <p>点击下方按钮获取邮箱和发送指南</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; margin-bottom: 15px; padding: 12px; background: white; border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); transition: transform 0.3s;">
                        <div style="font-size: 20px; color: #2575fc; margin-right: 12px; width: 40px; height: 40px; background: rgba(37, 117, 252, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h3>响应时间</h3>
                            <p>我们会在24小时内回复您的邮件</p>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);">
                    <h2 style="color: #2575fc; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #eaeaea; font-size: 1.4rem;">我的QQ邮箱</h2>
                    <p>您可以通过以下邮箱地址联系我们：</p>
                    
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; text-align: center; margin-top: 15px;">
                        <i class="fas fa-envelope fa-2x" style="color: #2575fc;"></i>
                        <div style="font-size: 1.4rem; color: #1565c0; font-weight: bold; margin: 12px 0; word-break: break-all;">2745994601@qq.com</div>
                        <p>复制上述邮箱地址，或点击下方按钮获取发送指南</p>
                        
                        <button class="password-button" id="showEmailBtn" style="margin-top: 12px;">
                            <i class="fas fa-paper-plane"></i> 如何发送邮件
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 12px; background: #fff3e0; border-radius: 8px; font-size: 0.9rem;">
                        <h3 style="color: #ff9800; margin-bottom: 8px; font-size: 1rem;"><i class="fas fa-lightbulb"></i> 温馨提示</h3>
                        <p>请点击上方按钮查看如何通过QQ邮箱给我们发送邮件。您需要登录自己的QQ邮箱进行操作。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 密码输入弹窗 -->
    <div class="password-modal" id="passwordModal">
        <div class="password-content">
            <span class="close-modal" id="closePasswordModal">&times;</span>
            <h2>请输入密码</h2>
            <input type="text" class="password-input" id="passwordInput" placeholder="密码是作者的QQ昵称哦😌">
            <button class="password-button" id="submitPassword">😘确认</button>
        </div>
    </div>
    
    <!-- 更多API密码输入弹窗 -->
    <div class="password-modal" id="moreApiModal">
        <div class="password-content">
            <span class="close-modal" id="closeApiModal">&times;</span>
            <h2>解锁更多API</h2>
            <input type="text" class="password-input" id="apiPasswordInput" placeholder="猜猜作者的生日😜-纯数字例：20090708">
            <button class="password-button" id="submitApiPassword">确认😝</button>
        </div>
    </div>
    
    <!-- 音频元素 -->
    <audio id="bgMusic" loop></audio>

    <script>
        // ==================== 配置区域 ====================
        // 选择播放源：'yes' 播放本地文件 | 'no' 播放网络URL | 'so' 使用API模式
        const USE_AUDIO_SOURCE = 'so';
        
        // 本地音频文件路径（当USE_AUDIO_SOURCE为'yes'时使用）
        const LOCAL_AUDIO_PATH = 'a1.mp3';
        
        // 网络音频URL列表（当USE_AUDIO_SOURCE为'no'时使用）
        const AUDIO_URLS = [
            'http://er.sycdn.kuwo.cn/d6930e691721d319cc8dfcc685f81026/68a87ecb/resource/30106/trackmedia/F000004GeCFP26GboB.flac?bitrate$2000&format$flac&source$kwplayerhd_ar_5.1.0.1_B_fangyitong_vh.apk&type$convert_url2&user$keluze_a09355a9b6fc44f297a87ca7dd0724a1&loginUid$',
            'http://er.sycdn.kuwo.cn/160c653d344a5613799b163735b1031f/68a87ee8/resource/30106/trackmedia/F000003gUJZ51VwObs.flac?bitrate$2000&format$flac&source$kwplayerhd_ar_5.1.0.1_B_fangyitong_vh.apk&type$convert_url2&user$keluze_a09355a9b6fc44f297a87ca7dd0724a1&loginUid$',
            'http://er.sycdn.kuwo.cn/0bba26f0860cb5f0cced9b713c5384a5/68a87ed2/resource/30106/trackmedia/C200004GeCFP26GboB.m4a?bitrate$48&format$aac&source$kwplayerhd_ar_5.1.0.1_B_fangyitong_vh.apk&type$convert_url2&user$keluze_a09355a9b6fc44f297a87ca7dd0724a1&loginUid$'
        ];
        
        // API模式下的默认音乐列表
        const DEFAULT_MUSIC_LIST = [
            "Melodic Minor（DJ旋律）DJ文樂",
            "坠落（混音DJ版） DJ铁柱",
            "爱哎唉（DJ上头咚鼓版）DJ铁柱"
        ];
        
// ==================== 密码加密区域 ====================
// 使用Base64编码存储密码
// 第一个密码：我的QQ大大 的Base64编码
const PASSWORD_BASE64_1 = "4pyO4oSz4LmT4oKv446VLuWAvuW/g+KdgA==";
        
// 第二个密码：我的生日丫丫 的Base64编码
const PASSWORD_BASE64_2 = "MjAxMTA5MDE=";
        
// 密码验证函数 - 适配现有代码
function validatePassword(input, encodedPassword) {
    // 将输入转换为Base64编码
    try {
        const inputBase64 = btoa(unescape(encodeURIComponent(input)));
        // 检查是否匹配Base64字符串
        return inputBase64 === encodedPassword;
    } catch (e) {
        console.error("密码验证错误:", e);
        return false;
    }
}

// 为了适配现有代码，创建两个变量保持与原来相同的名称
const PASSWORD_PARTS_1 = PASSWORD_BASE64_1;
const PASSWORD_PARTS_2 = PASSWORD_BASE64_2;
        
// 获取解密后的密码（仅用于调试，实际使用时不需要）
function getDecryptedPassword(encodedPassword) {
    try {
        return decodeURIComponent(escape(atob(encodedPassword)));
    } catch (e) {
        console.error("密码解密错误:", e);
        return "";
    }
}
        
// 控制台输出解密后的密码（仅用于调试）
console.log("解密后的密码1:", getDecryptedPassword(PASSWORD_PARTS_1));
console.log("解密后的密码2:", getDecryptedPassword(PASSWORD_PARTS_2));
// ==================== 密码加密结束 ====================
        
        // 页面加载2秒后显示浏览器原生提示
        setTimeout(function() {
            alert("作者：相拥与你/倾心");
        }, 2000);
        
        // 视频控制
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('myVideo');
            
            // 确保视频自动播放和循环
            video.autoplay = true;
            video.loop = true;
            video.muted = true; // 静音以确保自动播放
            
            // 禁用视频控制
            video.controls = false;
            
            // 监听视频结束并重新播放
            video.addEventListener('ended', function() {
                video.currentTime = 0;
                video.play();
            });
            
            // 防止右键菜单
            video.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // 尝试播放视频
            video.play().catch(function(error) {
                console.log('自动播放受阻:', error);
            });
            
            // 音乐控制
            const musicBall = document.getElementById('musicBall');
            const nextButton = document.getElementById('nextButton');
            const bgMusic = document.getElementById('bgMusic');
            const searchPanel = document.getElementById('searchPanel');
            const musicSearchInput = document.getElementById('musicSearchInput');
            const searchButton = document.getElementById('searchButton');
            const searchResults = document.getElementById('searchResults');
            const contactButton = document.getElementById('contactButton');
            const contactContainer = document.getElementById('contactContainer');
            const passwordModal = document.getElementById('passwordModal');
            const passwordInput = document.getElementById('passwordInput');
            const submitPassword = document.getElementById('submitPassword');
            const closePasswordModal = document.getElementById('closePasswordModal');
            const moreApiModal = document.getElementById('moreApiModal');
            const apiPasswordInput = document.getElementById('apiPasswordInput');
            const submitApiPassword = document.getElementById('submitApiPassword');
            const closeApiModal = document.getElementById('closeApiModal');
            const multiApiPanel = document.getElementById('multiApiPanel');
            const multiMusicSearchInput = document.getElementById('multiMusicSearchInput');
            const multiSearchButton = document.getElementById('multiSearchButton');
            const multiSearchResults = document.getElementById('multiSearchResults');
            const apiTabs = document.querySelectorAll('.api-tab');
            const showEmailBtn = document.getElementById('showEmailBtn');
            
            let musicPlaying = false;
            let currentAudioIndex = 0;
            let isApiMode = false;
            let currentApiSongIndex = 0;
            let isSearchUnlocked = false;
            let isMultiApiUnlocked = false;
            let currentApi = 'netease';
            
            // 初始化音频源
            function initAudioSource() {
                const mode = USE_AUDIO_SOURCE.toLowerCase();
                
                if (mode === 'yes') {
                    // 使用本地音频
                    isApiMode = false;
                    bgMusic.src = LOCAL_AUDIO_PATH;
                    // 隐藏下一曲按钮
                    nextButton.style.display = 'none';
                    searchPanel.style.display = 'none';
                    multiApiPanel.style.display = 'none';
                    musicBall.classList.remove('api-mode');
                } else if (mode === 'no') {
                    // 使用网络音频
                    isApiMode = false;
                    if (AUDIO_URLS.length > 0) {
                        bgMusic.src = AUDIO_URLS[currentAudioIndex];
                        // 显示下一曲按钮
                        nextButton.style.display = 'flex';
                        searchPanel.style.display = 'none';
                        multiApiPanel.style.display = 'none';
                        musicBall.classList.remove('api-mode');
                    } else {
                        console.error('没有可用的音频URL');
                        musicBall.style.display = 'none';
                        nextButton.style.display = 'none';
                    }
                } else if (mode === 'so') {
                    // 使用API模式
                    isApiMode = true;
                    nextButton.style.display = 'flex';
                    musicBall.classList.add('api-mode');
                    
                    // 自动搜索并播放默认音乐列表
                    setTimeout(() => {
                        searchAndPlayDefaultMusic();
                    }, 1000);
                }
            }
            
            // 搜索并播放默认音乐
            async function searchAndPlayDefaultMusic() {
                if (DEFAULT_MUSIC_LIST.length === 0) return;
                
                try {
                    const keyword = DEFAULT_MUSIC_LIST[currentApiSongIndex];
                    const response = await fetch(`https://api.i-meto.com/meting/api?server=netease&type=search&id=${encodeURIComponent(keyword)}`);
                    const data = await response.json();
                    
                    if (data && data.length > 0) {
                        // 找到最匹配的歌曲（标题相似度最高）
                        let bestMatch = data[0];
                        let bestScore = calculateSimilarity(keyword, data[0].name || data[0].title);
                        
                        for (let i = 1; i < Math.min(data.length, 5); i++) {
                            const score = calculateSimilarity(keyword, data[i].name || data[i].title);
                            if (score > bestScore) {
                                bestScore = score;
                                bestMatch = data[i];
                            }
                        }
                        
                        // 播放找到的歌曲
                        playMusicFromAPI(bestMatch.url, bestMatch.name, bestMatch.artist, bestMatch.pic);
                    }
                } catch (error) {
                    console.error('搜索默认音乐失败:', error);
                }
            }
            
            // 计算字符串相似度（简单实现）
            function calculateSimilarity(str1, str2) {
                if (!str1 || !str2) return 0;
                
                const s1 = str1.toLowerCase();
                const s2 = str2.toLowerCase();
                
                if (s1 === s2) return 1;
                
                // 简单计算相同字符的比例
                let matches = 0;
                for (let i = 0; i < Math.min(s1.length, s2.length); i++) {
                    if (s1[i] === s2[i]) matches++;
                }
                
                return matches / Math.max(s1.length, s2.length);
            }
            
            // 尝试播放音乐
            function tryPlayMusic() {
                if (isApiMode) {
                    // API模式下不自动播放，等待用户交互
                    musicBall.style.animationPlayState = 'paused';
                    return;
                }
                
                bgMusic.play().then(function() {
                    musicPlaying = true;
                    musicBall.classList.add('playing');
                    console.log('音乐开始播放');
                }).catch(function(error) {
                    console.log('自动播放音乐受阻:', error);
                    // 需要用户交互
                    musicBall.style.animationPlayState = 'paused';
                });
            }
            
            // 切换到下一首
            function playNext() {
                if (isApiMode) {
                    // API模式下的下一首
                    currentApiSongIndex = (currentApiSongIndex + 1) % DEFAULT_MUSIC_LIST.length;
                    searchAndPlayDefaultMusic();
                } else {
                    // 普通模式下的下一首
                    currentAudioIndex++;
                    
                    if (currentAudioIndex >= AUDIO_URLS.length) {
                        // 所有音频都已播放完毕
                        alert("作者偷懒了呢");
                        currentAudioIndex = 0; // 重置索引
                        return;
                    }
                    
                    // 保存当前播放状态和时间
                    const wasPlaying = !bgMusic.paused;
                    const currentTime = bgMusic.currentTime;
                    
                    // 切换音频源
                    bgMusic.src = AUDIO_URLS[currentAudioIndex];
                    
                    // 如果之前正在播放，则继续播放
                    if (wasPlaying) {
                        bgMusic.play().catch(function(error) {
                            console.log('播放下一首失败:', error);
                        });
                    }
                }
            }
            
            // 搜索音乐函数
            async function searchMusic(apiType = 'netease', keyword) {
                if (!keyword) {
                    keyword = apiType === 'netease' ? musicSearchInput.value.trim() : multiMusicSearchInput.value.trim();
                }
                
                if (!keyword) {
                    alert('请输入搜索内容！');
                    return;
                }
                
                const resultsElement = apiType === 'netease' ? searchResults : multiSearchResults;
                resultsElement.innerHTML = '<div style="padding: 20px; text-align: center;">搜索中...</div>';
                resultsElement.style.display = 'block';
                
                try {
                    const response = await fetch(`https://api.i-meto.com/meting/api?server=${apiType}&type=search&id=${encodeURIComponent(keyword)}`);
                    
                    if (!response.ok) {
                        throw new Error('API请求失败');
                    }
                    
                    const data = await response.json();
                    
                    if (data && data.length > 0) {
                        resultsElement.innerHTML = '';
                        data.forEach((song, index) => {
                            const item = document.createElement('div');
                            item.className = 'search-result-item';
                            item.innerHTML = `
                                <img src="${song.pic}" class="result-cover" onerror="this.src='data:image/svg+xml;charset=UTF-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\' viewBox=\'0 0 40 40\'%3E%3Crect fill=\'%233498db\' width=\'40\' height=\'40\'/%3E%3Ctext fill=\'%23ffffff\' font-family=\'Arial\' font-size=\'10\' x=\'50%25\' y=\'50%25\' dominant-baseline=\'middle\' text-anchor=\'middle\'%3E封面%3C/text%3E%3C/svg%3E'">
                                <div class="result-info">
                                    <div class="result-title">${song.name || song.title || '未知歌曲'}</div>
                                    <div class="result-artist">${song.artist || song.author || '未知艺术家'}</div>
                                </div>
                            `;
                            
                            item.addEventListener('click', () => {
                                playMusicFromAPI(song.url, song.name, song.artist, song.pic);
                                resultsElement.style.display = 'none';
                            });
                            
                            resultsElement.appendChild(item);
                        });
                    } else {
                        resultsElement.innerHTML = '<div style="padding: 20px; text-align: center;">未找到结果</div>';
                    }
                } catch (error) {
                    console.error('搜索失败:', error);
                    resultsElement.innerHTML = '<div style="padding: 20px; text-align: center;">搜索失败，请重试</div>';
                }
            }
            
            // 从API播放音乐
            async function playMusicFromAPI(url, title, artist, cover) {
                try {
                    // 设置音频源
                    bgMusic.src = url;
                    
                    // 尝试播放
                    bgMusic.play().then(() => {
                        musicPlaying = true;
                        musicBall.classList.add('playing');
                        musicBall.style.animationPlayState = 'running';
                        console.log('API音乐开始播放');
                    }).catch(error => {
                        console.log('API音乐播放受阻:', error);
                    });
                } catch (error) {
                    console.error('播放失败:', error);
                    alert('播放失败: ' + error.message);
                }
            }
            
            // 初始化音频源
            initAudioSource();
            
            // 页面加载后尝试播放音乐
            tryPlayMusic();
            
            // 点击音乐球控制音乐
            musicBall.addEventListener('click', function() {
                if (isApiMode) {
                    // API模式下点击显示/隐藏搜索面板
                    if (!isSearchUnlocked) {
                        // 显示密码输入框
                        passwordModal.style.display = 'flex';
                        passwordInput.focus();
                        return;
                    }
                    
                    if (isMultiApiUnlocked) {
                        // 多API模式
                        if (multiApiPanel.style.display === 'block') {
                            multiApiPanel.style.display = 'none';
                        } else {
                            multiApiPanel.style.display = 'block';
                            multiMusicSearchInput.focus();
                            searchPanel.style.display = 'none';
                        }
                    } else {
                        // 单API模式
                        if (searchPanel.style.display === 'block') {
                            searchPanel.style.display = 'none';
                        } else {
                            searchPanel.style.display = 'block';
                            musicSearchInput.focus();
                        }
                    }
                } else {
                    // 普通模式下的播放/暂停
                    if (musicPlaying) {
                        bgMusic.pause();
                        musicPlaying = false;
                        musicBall.classList.remove('playing');
                        musicBall.style.animationPlayState = 'paused';
                    } else {
                        bgMusic.play();
                        musicPlaying = true;
                        musicBall.classList.add('playing');
                        musicBall.style.animationPlayState = 'running';
                    }
                }
            });
            
            // 点击下一曲按钮
            nextButton.addEventListener('click', function() {
                playNext();
            });
            
            // 点击搜索按钮
            searchButton.addEventListener('click', function() {
                searchMusic('netease');
            });
            
            // 多API搜索按钮
            multiSearchButton.addEventListener('click', function() {
                searchMusic(currentApi);
            });
            
            // API标签切换
            apiTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    apiTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentApi = this.getAttribute('data-api');
                });
            });
            
            // 回车键搜索
            musicSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchMusic('netease');
                }
            });
            
            multiMusicSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchMusic(currentApi);
                }
            });
            
            // 留言系统按钮点击事件
            contactButton.addEventListener('click', function() {
                contactContainer.classList.toggle('active');
            });
            
            // 密码提交
            submitPassword.addEventListener('click', function() {
                if (validatePassword(passwordInput.value, PASSWORD_PARTS_1)) {
                    isSearchUnlocked = true;
                    passwordModal.style.display = 'none';
                    searchPanel.style.display = 'block';
                    musicSearchInput.focus();
                } else {
                    alert('密码错误！😭');
                    passwordInput.value = '';
                }
            });
            
            // 更多API密码提交
            submitApiPassword.addEventListener('click', function() {
                if (validatePassword(apiPasswordInput.value, PASSWORD_PARTS_2)) {
                    isMultiApiUnlocked = true;
                    moreApiModal.style.display = 'none';
                    searchPanel.style.display = 'none';
                    multiApiPanel.style.display = 'block';
                    multiMusicSearchInput.focus();
                } else {
                    alert('密码错误！😭');
                    apiPasswordInput.value = '';
                }
            });
            
            // 关闭密码模态框
            closePasswordModal.addEventListener('click', function() {
                passwordModal.style.display = 'none';
            });
            
            closeApiModal.addEventListener('click', function() {
                moreApiModal.style.display = 'none';
            });
            
            // 点击模态框外部关闭
            passwordModal.addEventListener('click', function(e) {
                if (e.target === passwordModal) {
                    passwordModal.style.display = 'none';
                }
            });
            
            moreApiModal.addEventListener('click', function(e) {
                if (e.target === moreApiModal) {
                    moreApiModal.style.display = 'none';
                }
            });
            
            // 添加更多API按钮
            const moreApiButton = document.createElement('button');
            moreApiButton.className = 'more-api-button';
            moreApiButton.innerHTML = '更多😋';
            moreApiButton.addEventListener('click', function(e) {
                e.stopPropagation();
                moreApiModal.style.display = 'flex';
                apiPasswordInput.focus();
            });
            
            searchPanel.appendChild(moreApiButton);
            
            // 邮箱指南按钮
            showEmailBtn.addEventListener('click', function() {
                alert('请复制邮箱地址：2745994601@qq.com，然后访问 mail.qq.com 登录您的QQ邮箱，点击"写邮件"粘贴我们的邮箱地址，编写内容并发送。');
            });
            
            // 添加触摸事件支持（移动设备）
            musicBall.addEventListener('touchstart', function(e) {
                e.preventDefault();
                if (isApiMode) {
                    if (!isSearchUnlocked) {
                        passwordModal.style.display = 'flex';
                        passwordInput.focus();
                        return;
                    }
                    
                    if (isMultiApiUnlocked) {
                        if (multiApiPanel.style.display === 'block') {
                            multiApiPanel.style.display = 'none';
                        } else {
                            multiApiPanel.style.display = 'block';
                            searchPanel.style.display = 'none';
                        }
                    } else {
                        if (searchPanel.style.display === 'block') {
                            searchPanel.style.display = 'none';
                        } else {
                            searchPanel.style.display = 'block';
                        }
                    }
                } else {
                    if (musicPlaying) {
                        bgMusic.pause();
                        musicPlaying = false;
                        musicBall.classList.remove('playing');
                        musicBall.style.animationPlayState = 'paused';
                    } else {
                        bgMusic.play();
                        musicPlaying = true;
                        musicBall.classList.add('playing');
                        musicBall.style.animationPlayState = 'running';
                    }
                }
            });
            
            nextButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                playNext();
            });
        });
    </script>
</body>
</html>